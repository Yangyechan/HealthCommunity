<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>헬스장 작성</title>
</head>
<body>
<h1>헬스장 정보 작성</h1>

<!-- 헬스장 정보 작성 폼 -->
<form id="gymPostForm">
    <label for="location">헬스장 위치:</label>
    <input type="text" id="location" name="location" required><br>

    <label for="title">헬스장 이름:</label>
    <input type="text" id="title" name="title" required><br>

    <label for="content">헬스장 정보:</label><br>
    <textarea id="content" name="content" rows="4" cols="50" required></textarea><br>

    <label for="username">관장 ID:</label>
    <input type="text" id="username" name="username" required><br>

    <label for="x">헬스장 위치 좌표 (X):</label>
    <input type="number" id="x" name="x" step="0.000001" required><br>

    <label for="y">헬스장 위치 좌표 (Y):</label>
    <input type="number" id="y" name="y" step="0.000001" required><br>

    <button type="button" onclick="submitGymPost()">작성 완료</button>
</form>

<!-- 작성 결과 메시지 -->
<div id="postResult"></div>

<script>
    function submitGymPost() {
        const location = document.getElementById("location").value;
        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;
        const username = document.getElementById("username").value;
        const x = parseFloat(document.getElementById("x").value);
        const y = parseFloat(document.getElementById("y").value);

        const gymPostData = {
            location: location,
            title: title,
            content: content,
            username: username,
            x: x,
            y: y
        };

        fetch("/gym/post", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(gymPostData)
        })
            .then(response => {
                if (response.ok) {
                    // 작성 성공 시 메시지 표시
                    document.getElementById("postResult").textContent = "헬스장 정보가 성공적으로 작성되었습니다.";
                    // 입력 폼 초기화
                    document.getElementById("gymPostForm").reset();

                    window.location.href ="/gym/main";
                } else {
                    // 작성 실패 시 메시지 표시
                    document.getElementById("postResult").textContent = "헬스장 정보 작성에 실패하였습니다.";
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert("오류가 발생하였습니다. 다시 시도해주세요.");
            });
    }
</script>
</body>
</html>
